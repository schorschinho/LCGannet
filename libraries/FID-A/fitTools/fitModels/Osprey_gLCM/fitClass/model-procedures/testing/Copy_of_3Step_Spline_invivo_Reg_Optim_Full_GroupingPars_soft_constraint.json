{
  "basisset": {
    "file": [
      "which(fullfile(''fit'',''basissets'',''3T'',''philips'',''unedited'',''press'',''35'',''basis_philips_press35.mat''))"
    ],
    "mmdef": [
      "which(fullfile(''libraries'',''FID-A'',''fitTools'',''fitModels'',''Osprey_gLCM'',''fitClass'',''mm-definitions'',''MMLipLCModel.json''))"  
    ]
  },
  "Steps": [{
      "module": "OptimReg",
      "ModelFunction": "GeneralizedBasicPhysicsModel",
      "extra": {
        "flag": 0
      },
      "basisset": {
        "spec": 1,
        "include": [
          "Asc","Asp","Cr","CrCH2","GABA","GPC","GSH","Gln","Glu","mI","Lac","NAA",
          "NAAG","PCh","PCr","PE","sI","Tau"
        ]
      },
      "fit_opts": {
        "ppm": [
          1.8,
          4
        ],
        "gap": [],
        "optimDomain": "FD",
        "optimSignalPart": "R",
        "baseline": {
          "type": "spline",
          "dkntmn": 0.0667
        },
        "solver": "lsqnonlin"
      },
      "parameter": [
        "ph0","ph1","gaussLB","lorentzLB","freqShift","metAmpl","baseAmpl"
      ],
      "parametrizations": {
          "lorentzLB": {
          "gr":{"g1":["Asc","Asp","Cr","CrCH2","GABA","GPC","GSH","Gln","Glu","mI","Lac","NAA",
          "NAAG","PCh","PCr","PE","sI","Tau"]}
        },
        "freqShift": {
          "gr":{"g1":["Asc","Asp","Cr","CrCH2","GABA","GPC","GSH","Gln","Glu","mI","Lac","NAA",
          "NAAG","PCh","PCr","PE","sI","Tau"]}
        },
        "baseAmpl": {
          "RegFun": "SecondDerivative"
        }
      }
      ,
      "regularizer": {
        "parameter": "baseAmpl",
        "fun"      : "LambdaEDFormalism",
        "m"        : 1,
        "ub"       : 1,
        "steps"    : 1,
        "fixedParameter": ["ph0","ph1","gaussLB","lorentzLB","freqShift"]
      }
    },
    {
      "module": "OptimReg",
      "ModelFunction": "GeneralizedBasicPhysicsModel",
      "extra": {
        "flag": 0
      },
      "basisset": {
        "spec": 1,
        "include": [
          "Asc","Asp","Cr","CrCH2","GABA","GPC","GSH","Gln","Glu","mI","Lac","NAA",
          "NAAG","PCh","PCr","PE","sI","Tau","MM09","MM12","MM14","MM17","MM20",
          "Lip09","Lip13a","Lip13b","Lip13c","Lip13d","Lip20"
        ]
      },
      "fit_opts": {
        "ppm": [
          0.2,
          4
        ],
        "gap": [],
        "optimDomain": "FD",
        "optimSignalPart": "R",
        "baseline": {
          "type": "spline",
          "dkntmn": 0.0667
        },
        "solver": "lsqnonlin"
      },
      "parameter": [
        "ph0","ph1","gaussLB","lorentzLB","freqShift","metAmpl","baseAmpl"
      ],
      "parametrizations": {
        "baseAmpl": {
          "RegFun": "SecondDerivative"
        },
        "ph0": {
          "init": [
            "Step 1"
          ],
          "ub": [
            "Step 1"
          ],
          "lb": [
            "Step 1"
          ]
        },
        "ph1": {
          "init": [
            "Step 1"
          ],
          "ub": [
            "Step 1"
          ],
          "lb": [
            "Step 1"
          ]
        },
        "gaussLB": {
          "init": [
            "Step 1"
          ],
          "ub": [
            "Step 1"
          ],
          "lb": [
            "Step 1"
          ]
        },
        "lorentzLB": {
          "init": [
            "Step 1"
          ],
          "ub": [
            "Step 1"
          ],
          "lb": [
            "Step 1"
          ],
          "gr":{"g1":["Asc","Asp","Cr","CrCH2","GABA","GPC","GSH","Gln","Glu","mI","Lac","NAA",
          "NAAG","PCh","PCr","PE","sI","Tau","MM09","MM12","MM14","MM17","MM20",
          "Lip09","Lip13a","Lip13b","Lip13c","Lip13d","Lip20"]}
        },
        "freqShift": {
          "init": [
            "Step 1"
          ],
          "ub": [
            "Step 1"
          ],
          "lb": [
            "Step 1"
          ],
          "gr":{"g1":["Asc","Asp","Cr","CrCH2","GABA","GPC","GSH","Gln","Glu","mI","Lac","NAA",
          "NAAG","PCh","PCr","PE","sI","Tau","MM09","MM12","MM14","MM17","MM20",
          "Lip09","Lip13a","Lip13b","Lip13c","Lip13d","Lip20"]}
        },
        "metAmpl": {
            "sc":{
                  "adj": ["Lip09","Lip20","MM20","MM12","MM14","MM17","CrCH2","Asp","GABA","sI","Tau","NAAG"],
                  "fix": [["Lip13a","Lip13b"],["Lip13a","Lip13b"],"MM09","MM09","MM09","MM09",["Cr","PCr"],["Cr","GPC","NAA","NAAG","PCh","PCr"],
                         ["Cr","GPC","NAA","NAAG","PCh","PCr"],["Cr","GPC","NAA","NAAG","PCh","PCr"],["Cr","GPC","NAA","NAAG","PCh","PCr"],"NAA"],
                  "fix_factor":[[1,1],[1,1],1,1,1,1,[1,1],[1,3,1,1,3,1],[1,3,1,1,3,1],[1,3,1,1,3,1],[1,3,1,1,3,1],1],
                  "ex": [0.267,0.15,1.5,0.3,0.75,0.375,0.1,0.05,0.04,0.02,0.04,0.15],
                  "sd": [0.1,0.07,0.375,0.1,0.45,0.3,0.1,0.05,0.04,0.02,0.06,0.15],
                  "fun": "ratio",
                  "scaling": 5
            }}
      },
      "regularizer": {
        "parameter": "baseAmpl",
        "fun"      : "LambdaEDFormalism",
        "m"        : 5,
        "ub"       : 7,
        "steps"    : 20,
        "fixedParameter": ["ph0","ph1","gaussLB","lorentzLB","freqShift"]
      }
    },
    {
      "module": "Model",
      "ModelFunction": "GeneralizedBasicPhysicsModel",
      "extra": {
        "flag": 0
      },
      "basisset": {
        "spec": 1,
        "include": [
          "Asc","Asp","Cr","CrCH2","GABA","GPC","GSH","Gln","Glu","mI","Lac","NAA",
          "NAAG","PCh","PCr","PE","sI","Tau","MM09","MM12","MM14","MM17","MM20",
          "Lip09","Lip13a","Lip13b","Lip13c","Lip13d","Lip20"
        ]
      },
      "fit_opts": {
        "ppm": [
          0.2,
          4
        ],
        "gap": [],
        "optimDomain": "FD",
        "optimSignalPart": "R",
        "baseline": {
          "type": "spline",
          "dkntmn": 0.0667
        },
        "solver": "lsqnonlin"
      },
      "parameter": [
        "ph0","ph1","gaussLB","lorentzLB","freqShift","metAmpl","baseAmpl"
      ],
      "parametrizations": {
        "metAmpl": {
            "sc":{
                  "adj": ["Lip09","Lip20","MM20","MM12","MM14","MM17","CrCH2","Asp","GABA","sI","Tau","NAAG"],
                  "fix": [["Lip13a","Lip13b"],["Lip13a","Lip13b"],"MM09","MM09","MM09","MM09",["Cr","PCr"],["Cr","GPC","NAA","NAAG","PCh","PCr"],
                         ["Cr","GPC","NAA","NAAG","PCh","PCr"],["Cr","GPC","NAA","NAAG","PCh","PCr"],["Cr","GPC","NAA","NAAG","PCh","PCr"],"NAA"],
                  "fix_factor":[[1,1],[1,1],1,1,1,1,[1,1],[1,3,1,1,3,1],[1,3,1,1,3,1],[1,3,1,1,3,1],[1,3,1,1,3,1],1],
                  "ex": [0.267,0.15,1.5,0.3,0.75,0.375,0.1,0.05,0.04,0.02,0.04,0.15],
                  "sd": [0.1,0.07,0.375,0.1,0.45,0.3,0.1,0.05,0.04,0.02,0.06,0.15],
                  "fun": "ratio",
                  "scaling": 5
            }},
        "baseAmpl": {
          "RegFun": "SecondDerivative",
          "RegPar": ["Step 2"]
        }
      }
    }
  ]
}
